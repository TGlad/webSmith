saveChanges?description=This+object+defines+a+caption+or+set+of+sentences+that+a+character+might+have+typed.+The+current+user+will+have+this+displayed+at+the+top+of+the+screen%2C+and+other+users+will+have+their%27s+displayed+above+them.+Captions+could+also+be+generated+by+AI+controllers.&wikilink=&init=&receive=&reply=&predict=&react=++++if+%28up.enterPressed%29+%2F%2F+enter%0D%0A++++%7B%0D%0A++++++if+%28baseState.newMessage%29+%2F%2F+if+haven%27t+entered+anything+but+you+press+enter+then+this+clears+the+text%0D%0A++++++%7B%0D%0A++++++++if+%28baseState.lastMessage%5B0%5D.length+%3E+0%29%0D%0A++++++++%7B%0D%0A++++++++++baseState.lastMessage+%3D+%5B%5D%3B+%2F%2F+remove%0D%0A++++++++++baseState.lastMessage%5B0%5D+%3D+%27%27%3B%0D%0A++++++++%7D%0D%0A++++++++else%0D%0A++++++++%7B%0D%0A++++++++++baseState.message+%3D+%5B%5D%3B+%2F%2F+clear+current%0D%0A++++++++++baseState.message%5B0%5D+%3D+%27%27%3B%0D%0A++++++++++baseState.newParagraph+%3D+true%3B%0D%0A++++++++%7D%0D%0A++++++%7D%0D%0A++++++baseState.newMessage+%3D+true%3B%0D%0A++++%7D%0D%0A++++else+if+%28up.backspacePressed+%26%26+%21baseState.newMessage%29+%2F%2F+backspace%0D%0A++++%7B%0D%0A++++++var+length+%3D+baseState.message%5Bcaption.message.length+-+1%5D.length%3B%0D%0A++++++var+minLength+%3D+0%3B%0D%0A++++++if+%28baseState.message.length+%3D%3D+1+%26%26+baseState.newParagraph%29%0D%0A++++++++minLength+%3D+24%3B%0D%0A++++++if+%28length+%3E+minLength%29%0D%0A++++++%7B%0D%0A++++++++baseState.message%5BbaseState.message.length+-+1%5D+%3D+baseState.message%5BbaseState.message.length+-+1%5D.slice%280%2C+-1%29%3B%0D%0A++++++++if+%28baseState.message.length+%3D%3D+1+%26%26+length+-+1+%3D%3D+minLength%29%0D%0A++++++++%7B%0D%0A++++++++++baseState.message%5B0%5D+%3D+%27%27%3B%0D%0A++++++++++baseState.newMessage+%3D+true%3B%0D%0A++++++++%7D%0D%0A++++++%7D%0D%0A++++++else%0D%0A++++++%7B%0D%0A++++++++if+%28baseState.message.length+%3E+1%29%0D%0A++++++++++baseState.message.pop%28%29%3B%0D%0A++++++%7D%0D%0A++++%7D%0D%0A++++else+%2F%2F+parse+the+key+for+only+visible+letters%0D%0A++++%7B%0D%0A++++++var+symbolIndex+%3D+baseState.symbolKeyIndices.indexOf%28key%29%3B%0D%0A++++++if+%28key+%3E+47+%26%26+key+%3C+91+%7C%7C+key+%3D%3D+32+%7C%7C+symbolIndex+%21%3D+-1%29%0D%0A++++++%7B%0D%0A++++++++if+%28baseState.newMessage%29%0D%0A++++++++%7B%0D%0A++++++++++if+%28baseState.message%5B0%5D+%21%3D+%27%27%29%0D%0A++++++++++%7B%0D%0A++++++++++++baseState.lastMessage+%3D+caption.message%3B%0D%0A++++++++++++baseState.newParagraphLast+%3D+caption.newParagraph%3B%0D%0A++++++++++%7D%0D%0A++++++++++baseState.message+%3D+%5B%5D%3B%0D%0A++++++++++if+%28baseState.newParagraph%29%0D%0A++++++++++++baseState.message%5B0%5D+%3D+%27++++++++++++++++++++++++%27%3B+%2F%2F+start+indented.+Will+do+this+a+better+way+at+some+point%0D%0A++++++++++else%0D%0A++++++++++++baseState.message%5B0%5D+%3D+%27%27%3B%0D%0A++++++++++baseState.newMessage+%3D+false%3B%0D%0A++++++++%7D%0D%0A++++++++if+%28key+%3E%3D+64+%26%26+key+%3C+91%29%0D%0A++++++++%7B%0D%0A++++++++++if+%28%21shiftDown%29%0D%0A++++++++++%7B%0D%0A++++++++++++key+%3D+key+%2B+32%3B%0D%0A++++++++++%7D%0D%0A++++++++%7D%0D%0A++++++++else+if+%28key+%3E%3D+48+%26%26+key+%3C+58%29%0D%0A++++++++%7B%0D%0A++++++++++if+%28shiftDown%29%0D%0A++++++++++%7B%0D%0A++++++++++++key+%3D+baseState.numberKeyMap%5Bkey+-+48%5D%3B%0D%0A++++++++++%7D%0D%0A++++++++%7D%0D%0A++++++++else+if+%28symbolIndex+%21%3D+-1%29%0D%0A++++++++%7B%0D%0A++++++++++if+%28shiftDown%29%0D%0A++++++++++++key+%3D+baseState.symbolKeyLookupShift%5BsymbolIndex%5D%3B%0D%0A++++++++++else%0D%0A++++++++++++key+%3D+baseState.symbolKeyLookup%5BsymbolIndex%5D%3B%0D%0A++++++++%7D%0D%0A++++++++var+newChar+%3D+String.fromCharCode%28key%29%3B%0D%0A++++++++baseState.message%5BbaseState.message.length+-+1%5D+%2B%3D+newChar%3B%0D%0A++++++%7D%0D%0A++++%7D%0D%0A&generate=&analyse=up.enterPressed+%3D+backIn.keysPressed%5B13%5D%3B%0D%0Aup.backspacePressed+%3D+backIn.keysPressed%5B8%5D%3B&save+as=Caption