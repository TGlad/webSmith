saveChanges?description=this+interprets+the+user+input+into+character+control+commands%2C+e.g.+up+arrow+means+walk+forwards.&wikilink=&init=out.targetVel+%3D+new+Vector3%280%2C0%2C0%29%3B%0D%0Aout.targetAngularVel+%3D+new+Vector3%280%2C0%2C0%29%3B%0D%0A%0D%0AbackInSource.keysPressed+%3D+%7Bpointer%3Aparameters.keyboard.backOut%2C+name%3A%27keysPressed%27%7D%3B%0D%0AbackInSource.keysDown+%3D+%7Bpointer%3Aparameters.keyboard.backOut%2C+name%3A%27keysDown%27%7D%3B%0D%0A%0D%0AoutDest.forwardsVel+%3D+%7Bpointer%3Aparameters.character.down%2C+name%3A%27forwardsVel%27%7D%3B+%2F%2F+internal+character+state+since+this+is+a+child+of+character%0D%0AoutDest.strafeRightVel+%3D+%7Bpointer%3Aparameters.character.down%2C+name%3A%27strafeRightVel%27%7D%3B%0D%0AoutDest.turnLeftVel+%3D+%7Bpointer%3Aparameters.character.down%2C+name%3A%27turnLeftVel%27%7D%3B%0D%0A%0D%0AbaseState.canMove+%3D+true%3B%0D%0A%0D%0A%2F%2F+TODO+this+may+be+too+direct%0D%0APosition+leftHandPos+%3D+parameters.character.baseState.leftHandTransform.pos%3B%0D%0APosition+rightHandPos+%3D+parameters.character.baseState.rightHandTransform.pos%3B%0D%0A%0D%0A%2F%2F+now+create+control+objects+for+each+hand%0D%0Avar+leftHand+%3D+new+HandKeyboardUserControl%28%29%3B%0D%0Ag_addObject%28leftHand%2C+%7Bparent%3A+parameters.character%2C+owner%3Athis%2C+startPos%3AleftHandPos%2C+keyboard%3Aparameters.keyboard%7D%29%3B%0D%0A%0D%0Avar+rightHand+%3D+new+HandMouseUserControl%28%29%3B%0D%0Ag_addObject%28rightHand%2C+%7Bparent%3A+parameters.character%2C+owner%3Athis%2C+startPos%3ArightHandPos%2C+mouse%3Aparameters.mouse%7D%29%3B%0D%0A&receive=&reply=&predict=&react=%2F%2F+interpret+the+keyboard+and+mouse+inputs+into+meaningful+data%0D%0ADirection+turningLeft+%3D+0%3B+%2F%2F+the+speed+that+you+would+go%2C+if+you+were+to+turn%0D%0Avar+isRunning+%3D+false%3B%0D%0Aif+%28baseState.canMove%29%0D%0A%7B++%0D%0A++if+%28not+up.strafeDown%29%0D%0A++++baseState.strafingRight+%3D+0%3B%0D%0A++if+%28up.leftDown%29%0D%0A++%7B%0D%0A++++if+%28up.strafeDown+and+baseState.strafingRight+%21%3D+1%29+%2F%2F+assuming+we%27re+not+already+strafing+the+other+way%0D%0A++++++baseState.strafingRight+%3D+-1%3B%0D%0A++++else%0D%0A++++++turningLeft+%3D+1%3B+%0D%0A++%7D%0D%0A++else+if+%28baseState.strafingRight+%3D%3D+-1%29+%2F%2F+don%27t+keep+strafing+left+if+you+don%27t+have+left+held+down%0D%0A++++baseState.strafingRight+%3D+0%3B%0D%0A++if+%28up.rightDown%29%0D%0A++%7B%0D%0A++++if+%28up.strafeDown+and+baseState.strafingRight+%21%3D+-1%29+%2F%2F+assuming+we%27re+not+already+strafing+the+other+way%0D%0A++++++baseState.strafingRight+%3D+1%3B%0D%0A++++else%0D%0A++++++turningLeft+%3D+-1%3B%0D%0A++%7D%0D%0A++else+if+%28baseState.strafingRight+%3D%3D+1%29+%2F%2F+don%27t+keep+strafing+right+if+you+don%27t+have+left+held+down%0D%0A++++baseState.strafingRight+%3D+0%3B%0D%0A++%0D%0A++if+%28baseState.movingForwards+%21%3D+-1%29+%2F%2F+stationary+or+going+forwards%0D%0A++%7B%0D%0A++++baseState.movingForwards+%3D+0%3B%0D%0A++++if+%28up.forwardsDown%29+%0D%0A++++%7B%0D%0A++++++if+%28up.backwardsDown%29%0D%0A++++++++isRunning+%3D+true%3B%0D%0A++++++baseState.movingForwards+%3D+1%3B%0D%0A++++%7D%0D%0A++%7D%0D%0A++if+%28baseState.movingForwards+%21%3D+1%29+%2F%2F+stationary+or+going+backwards%0D%0A++%7B%0D%0A++++baseState.movingForwards+%3D+0%3B%0D%0A++++if+%28up.backwardsDown%29+%2F%2F+down%0D%0A++++%7B%0D%0A++++++if+%28up.forwardsDown%29%0D%0A++++++++isRunning+%3D+true%3B%0D%0A++++++baseState.movingForwards+%3D+-1%3B%0D%0A++++%7D%0D%0A++%7D%0D%0A%7D%0D%0Aelse%0D%0A%7B%0D%0A++baseState.strafingRight+%3D+0%3B%0D%0A++baseState.movingForwards+%3D+0%3B%0D%0A%7D%0D%0Adown.turningLeft+%3D+turningLeft%3B%0D%0Adown.strafingRight+%3D+baseState.strafingRight%3B%0D%0Adown.movingForwards+%3D+baseState.movingForwards%3B%0D%0Adown.running+%3D+isRunning%3B%0D%0A%0D%0A%0D%0A%0D%0A&generate=%2F%2F+create+a+world+space+target+velocity+and+angular+velocity+from+the+internal+motion+state%0D%0A%0D%0AAngularVelocity+turnSpeed+%3D+1.1+radians+per+second%3B%0D%0AVelocity+walkSpeed+%3D+3.3+metres+per+second%3B+%2F%2F+approx+max+human%0D%0AVelocity+runSpeed+%3D+10+metres+per+second%3B+%2F%2F+approx+max+human%0D%0A%0D%0Aif+%28down.strafing+%21%3D+0%29+%0D%0A++turnSpeed+*%3D+0.4%3B+%2F%2F+slower+so+you+can+orbit+around+%0D%0Aout.turnLeftVel+%3D+down.turningLeft+*+turnSpeed%3B%0D%0A%0D%0Aif+%28down.running%29%0D%0A%7B%0D%0A++out.forwardsVel+%3D+down.movingForwards*runSpeed%3B%0D%0A++out.strafeRightVel+%3D+down.strafingRight*runSpeed%3B%0D%0A%7D%0D%0Aelse%0D%0A%7B%0D%0A++out.forwardsVel+%3D+down.movingForwards*walkSpeed%3B%0D%0A++out.strafeRightVel+%3D+down.strafingRight*walkSpeed%3B%0D%0A%7D%0D%0A%0D%0Aif+%28down.strafingRight+%21%3D+0+and+down.movingForwards+%21%3D+0%29%0D%0A%7B%0D%0A++out.forwardsVel+*%3D+0.707%3B+%2F%2F+so+strafing+while+moving+isn%27t+faster%0D%0A++out.strafeRightVel+*%3D+0.707%3B+%2F%2F+so+strafing+while+moving+isn%27t+faster%0D%0A%7D%0D%0A&analyse=up.leftDown+%3D+backIn.keysDown%5B37%5D%3B%0D%0Aup.rightDown+%3D+backIn.keysDown%5B39%5D%3B%0D%0Aup.strafeDown+%3D+backIn.keysDown%5B17%5D%3B%0D%0Aup.forwardsDown+%3D+backIn.keysDown%5B38%5D%3B%0D%0Aup.backwardsDown+%3D+backIn.keysDown%5B40%5D%3B%0D%0AbaseState.canMove+%3D+backIn.canMove%3B&save+as=CharacterUserControl