saveChanges?description=This+implements+a+basic+render+model%2C+with+a+single+directional+light&wikilink=&init=topState.vertexShaderCode+%3D+%22++++++++++++++++++++++++++++++++++%0D%0A++uniform+mat4+u_modelViewProjMatrix%3B++++++++++++++++++++++++++%0D%0A++uniform+mat4+u_normalMatrix%3B+++++++++++++++++++++++++++++++++%0D%0A++uniform+vec3+lightDir%3B+++++++++++++++++++++++++++++++++++++++%0D%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++attribute+vec3+vNormal%3B++++++++++++++++++++++++++++++++++++++%0D%0A++attribute+vec4+vTexCoord%3B++++++++++++++++++++++++++++++++++++%0D%0A++attribute+vec4+vPosition%3B++++++++++++++++++++++++++++++++++++%0D%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++varying+float+v_Dot%3B+++++++++++++++++++++++++++++++++++++++++%0D%0A++varying+vec2+v_texCoord%3B+++++++++++++++++++++++++++++++++++++%0D%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++void+main%28%29++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++%7B++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++++gl_Position+%3D+u_modelViewProjMatrix+*+vPosition%3B+++++++++++%0D%0A++++v_texCoord+%3D+vTexCoord.st%3B+++++++++++++++++++++++++++++++++%0D%0A++++vec4+transNormal+%3D+u_normalMatrix+*+vec4%28vNormal%2C1%29%3B+++++++%0D%0A++++v_Dot+%3D+max%28dot%28transNormal.xyz%2C+lightDir%29%2C+0.0%29%3B++++++++++%0D%0A++%7D++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A%22%3B+%0D%0AtopState.fragmentShaderCode+%3D+%22++++++++++++++++++++++++++++++++%0D%0A++uniform+sampler2D+sampler2d%3B+++++++++++++++++++++++++++++++++%0D%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++varying+float+v_Dot%3B+++++++++++++++++++++++++++++++++++++++++%0D%0A++varying+vec2+v_texCoord%3B+++++++++++++++++++++++++++++++++++++%0D%0A+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++void+main%28%29++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++%7B++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A++++vec4+color+%3D+texture2D%28sampler2d%2Cv_texCoord%29%3B++++++++++++++%0D%0A++++color+%2B%3D+vec4%280.2%2C0.2%2C0.2%2C1%29%3B++++++++++++++++++++++++++++++%0D%0A++++gl_FragColor+%3D+vec4%28color.xyz+*+v_Dot%2C+color.a%29%3B+++++++++++%0D%0A++%7D++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++%0D%0A%22%3B%0D%0Afunction+loadShader%28ctx%2C+code%2C+type%29%0D%0A%7B%0D%0A++if+%28type+%3D%3D+%22vertex%22%29%0D%0A++++var+shaderType+%3D+ctx.VERTEX_SHADER%3B%0D%0A++else+if+%28type+%3D%3D+%22fragment%22%29%0D%0A++++var+shaderType+%3D+ctx.FRAGMENT_SHADER%3B%0D%0A%0D%0A++%2F%2F+Create+the+shader+object%0D%0A++var+shader+%3D+ctx.createShader%28shaderType%29%3B%0D%0A++if+%28shader+%3D%3D+null%29%0D%0A++++return+null%3B%0D%0A+%0D%0A++ctx.shaderSource%28shader%2C+code%29%3B%0D%0A++ctx.compileShader%28shader%29%3B%0D%0A%0D%0A++%2F%2F+check+the+compile+status%0D%0A++var+compiled+%3D+ctx.getShaderParameter%28shader%2C+ctx.COMPILE_STATUS%29%3B%0D%0A++if+%28%21compiled%29+%0D%0A++%7B%0D%0A++++ctx.deleteShader%28shader%29%3B%0D%0A++++return+null%3B%0D%0A++%7D%0D%0A%0D%0A++return+shader%3B%0D%0A%7D%0D%0A%0D%0A%2F%2F+create+our+shaders%0D%0Avar+vertexShader+%3D+loadShader%28g_graphics%2C+topState.vertexShaderCode%2C+%22vertex%22%29%3B%0D%0Avar+fragmentShader+%3D+loadShader%28g_graphics%2C+topState.fragmentShaderCode%2C+%22fragment%22%29%3B%0D%0Aif+%28not+vertexShader+or+not+fragmentShader%29%0D%0A%7B%0D%0A++alert%28%22can%27t+load+shader%22%29%3B%0D%0A++return%3B%0D%0A%7D%0D%0A%0D%0A%2F%2F+note%2C+g_graphics+is+used+as+a+static+context%2C+the+object+is+not+written+to%2C+so+results+can+be+used+on+any+context%0D%0AtopState.renderType+%3D+g_graphics.createProgram%28%29%3B%0D%0Aif+%28not+topState.renderType%29%0D%0A%7B%0D%0A++alert%28%22can%27t+create+program%22%29%3B%0D%0A++return%3B%0D%0A%7D%0D%0A%0D%0Ag_graphics.attachShader%28topState.renderType%2C+vertexShader%29%3B%0D%0Ag_graphics.attachShader%28topState.renderType%2C+fragmentShader%29%3B%0D%0A%0D%0Aif+%28parameters.attributes%29+%0D%0A%7B%0D%0A++for+%28var+i+in+parameters.attributes%29%0D%0A++++g_graphics.bindAttribLocation%28topState.renderType%2C+i%2C+parameters.attributes%5Bi%5D%29%3B%0D%0A%7D%0D%0A%0D%0Ag_graphics.linkProgram%28topState.renderType%29%3B%0D%0A%0D%0Avar+linked+%3D+g_graphics.getProgramParameter%28topState.renderType%2C+g_graphics.LINK_STATUS%29%3B%0D%0Aif+%28not+linked%29%0D%0A%7B%0D%0A++alert%28%22shaders+dont+link%22%29%3B%0D%0A++g_graphics.deleteProgram%28topState.renderType%29%3B%0D%0A++g_graphics.deleteProgram%28fragmentShader%29%3B%0D%0A++g_graphics.deleteProgram%28vertexShader%29%3B%0D%0A++return%3B%0D%0A%7D%0D%0A%0D%0A%0D%0A&receive=&reply=&predict=&react=&generate=&analyse=&save+as=BasicShader